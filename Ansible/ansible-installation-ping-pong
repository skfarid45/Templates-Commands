install ansible core 
# sudo dnf install -y ansible-core

 STEP 1 ‚Äî CREATE ANSIBLE INVENTORY FILE
 On Ansible Control Machine (ACM / Master)

Open the Ansible inventory file:

sudo vim /etc/ansible/hosts


If the file does NOT exist (Amazon Linux 2023), then create it:

sudo mkdir -p /etc/ansible
sudo vim /etc/ansible/hosts

‚úî Scroll down and add:
[webservers]
172.31.39.169


(Replace 172.31.39.169 with your Host/Slave‚Äôs private IP.)

Save & Exit:

:wq!

‚úÖ STEP 2 ‚Äî OPEN SSH CONNECTION SETUP
‚úî Switch to ec2-user (very important)
sudo su - ec2-user

‚úÖ STEP 3 ‚Äî Generate SSH Key Pair
ssh-keygen


Press Enter ‚Üí Enter ‚Üí Enter
(Default location: ~/.ssh/id_rsa)

Your key pair is created.

‚úÖ STEP 4 ‚Äî COPY PUBLIC KEY TO HOST/SLAVE

Use the command:

ssh-copy-id ec2-user@<PRIVATE-IP-HOST>


Example for your IP:

ssh-copy-id ec2-user@172.31.39.169

‚úî It will ask:
Are you sure you want to continue connecting (yes/no)?


Type:

yes


If password is required, enter the host machine password (only if no key yet).

This installs your public key into:

~/.ssh/authorized_keys

‚úÖ STEP 5 ‚Äî TEST SSH CONNECTION FROM ACM ‚Üí HOST

After ssh-copy-id prints a message, it also shows the command to log in.

Run:

ssh ec2-user@172.31.39.169


If login works automatically WITHOUT password, SSH setup is successful.

To go back to the Control Node:
exit

üéâ Now your ACM can run Ansible commands on the host

Test:

ansible all -m ping


OR only webservers:

ansible webservers -m ping


You should get:

172.31.39.169 | SUCCESS => { ... }

‚≠ê Summary (Copy-Paste Version)
sudo su - ec2-user
ssh-keygen    (ENTER, ENTER, ENTER)
ssh-copy-id ec2-user@<private-ip-host>

sudo vim /etc/ansible/hosts
[webservers]
<private-ip-host>
:wq!

ansible webservers -m ping


